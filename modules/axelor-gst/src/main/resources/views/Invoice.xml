<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">


	<kanban name="invoice-kanban" title="All Invoices" model="com.axelor.gst.db.Invoice"
		columnBy="status" sequenceBy="priority">
		<field name="status" />
		<field name="company" />
		<field name="reference" />
		<field name="dateTime" />
		<field name="useInvoiceAddress" />
		<field name="netAmount" />
		<field name="netIGST" />
		<field name="netCGST" />
		<field name="netSGST" />
		<field name="grossAmount" />
		<template><![CDATA[
  <h4>Invoice</h4>
  <strong>Reference : {{reference}}</strong>
  <div class="card-body">Creation Date : {{dateTime}} <br/> GrossAmount : {{grossAmount}}</div>
  <div class="card-footer">Gross Amount : {{grossAmount}}</div>
  ]]></template>
	</kanban>


	<grid name="invoice-grid" title="Invoice" model="com.axelor.gst.db.Invoice">

		<field name="status" />
		<field name="company" />
		<field name="reference" />
		<field name="dateTime" />
		<field name="useInvoiceAddress" />
		<field name="netAmount" />
		<field name="netIGST" />
		<field name="netCGST" />
		<field name="netSGST" />
		<field name="grossAmount" />

	</grid>

	<form name="invoice-form" title="Invoice" model="com.axelor.gst.db.Invoice"
		css="panel-red" onNew="action-gst-invoice-record-on-new" readonlyIf="status==4">
		<toolbar>
			<button name="btnPrint" icon="fa-print" title="Generate PDF"
				onClick="action-method-invoice-set-logo-attachment-path,action-report-invoice"
				showIf="id" />

		</toolbar>
		<panel showFrame="false">
			<field name="status" widget="NavSelect" colspan="6" readonly="true" />
		</panel>

		<panel title="Invoice Details">
			<field name="reference" readonly="true" />
			<field name="dateTime" />
			<field name="netAmount" title="Net Amount" readonly="true" />
			<field name="netIGST" title="Net IGST" readonly="true" />
			<field name="netCGST" title="Net CGST" readonly="true" />
			<field name="netSGST" title="Net SGST" readonly="true" />
			<field name="grossAmount" title="Net Gross Amount" readonly="true" />
		</panel>

		<panel sidebar="true" title="Status Controller">
			<button-group>
				<button name="statusBtn" title="Proceed"
					onClick="com.axelor.gst.controllers.InvoiceController:changeStatus,save"
					icon="fa-arrow-right" />

				<button name="cancelBtn" title="Cancel Invoice"
					onClick="com.axelor.gst.controllers.InvoiceController:onCancel,save"
					prompt="Are you sure you want to cancel the invoice?" icon="fa-times" />
			</button-group>
		</panel>

		<panel-tabs>




			<panel title="Party Details" css="panel-blue">
				<field name="party" required="true"
					onChange="com.axelor.gst.controllers.InvoiceController:setParty" />
				<field name="partyContact" />
				<field name="invoiceAddress" required="true" />
				<field name="shippingAddress" />
				<field name="useInvoiceAddress"
					onChange="com.axelor.gst.controllers.InvoiceController:setShippingAddress" />
			</panel>

			<panel title="Invoice Items" css="panel-green">
				<field name="invoiceItemsList" colSpan="12"
					onChange="com.axelor.gst.controllers.InvoiceController:calculateNetGST,save" />
			</panel>
		</panel-tabs>

		<panel title="Company Details" sidebar="true" css="panel-violet"
			canEdit="true">
			<field name="company" required="true" canEdit="false">
				<editor x-viewer="true">
					<field name="logo" widget="image" readonly="true" />
					<field name="name" readonly="true" />
					<field name="address" readonly="true" />
				</editor>
			</field>
		</panel>
	</form>

	<action-record name="action-gst-invoice-record-on-new"
		model="com.axelor.gst.db.Invoice">		
		<field name="dateTime" expr="eval:__datetime__" />
	</action-record>

	<action-report name="action-report-invoice" design="invoice.rptdesign"
		output="invoice" format="pdf">
		<param name="invoiceId" expr="eval: id" />
		<param name="LogoAttachmentPath" expr="eval: LogoAttachmentPath" />
		<param name="LogoPath" expr="eval: LogoPath" />
	</action-report>
	<action-method name="action-method-invoice-set-logo-attachment-path">
		<call class="com.axelor.gst.controllers.InvoiceController"
			method="setAttachmentPath" />
	</action-method>

</object-views>